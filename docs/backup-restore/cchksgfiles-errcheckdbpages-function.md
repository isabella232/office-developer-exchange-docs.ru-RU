---
title: Функция CChkSGFiles.ErrCheckDbPages
manager: sethgros
ms.date: 11/16/2014
ms.audience: Developer
ms.topic: overview
ms.prod: office-online-server
ms.localizationpriority: medium
api_name:
- ErrCheckDbPages
api_type:
- dllExport
ms.assetid: 5e981a7c-28cd-470c-b7eb-606463e9dd05
description: 'Последнее изменение: 22 февраля 2013 г.'
ms.openlocfilehash: e458e4ad552abfebb7611822a6e756bdd2ac6350
ms.sourcegitcommit: 54f6cd5a704b36b76d110ee53a6d6c1c3e15f5a9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/24/2021
ms.locfileid: "59510409"
---
# <a name="cchksgfileserrcheckdbpages-function"></a>Функция CChkSGFiles.ErrCheckDbPages

**Применяется к: Exchange Server** 2003 | Exchange Server 2007 | Exchange Server 2010 | Exchange Server 2013 г.
  
Проверяет диапазон страниц в указанной базе данных. 
  
```cs
Vitual ERRErrCheckDbPages  
(
    Const ULONGiDb,
    Const VOID  * const pvPageBuffer,
    Const ULONGcbPageBuffer,
    PAGE_INFOrgPageInfo[],
    Const ULONGcPageInfo,
    Const ULONGulFlags = NO_FLAGS
);

```

## <a name="parameters"></a>Параметры

### <a name="idb"></a>iDb
  
Параметр входного ввода. Индекс в массив баз данных, указанный в параметре **rgwszDb[]** для **функции ErrInit.** Будет проверена база данных, индексация по этому параметру. 
    
### <a name="pvpagebuffer"></a>pvPageBuffer 
  
Параметр входного ввода. Указатель на буфер, содержащий одну или несколько страниц базы данных, которые необходимо проверить. Размер буфера должен быть несколько размеров страницы базы данных, как возвращается в **параметре pcbDbPageSize** функцией **ErrCheckDbHeaders.** Приложение вызова должно заполнить буфер содержимым страницы базы данных, прежде чем **вызывать ErrCheckDbPages.**
    
### <a name="cbpagebuffer"></a>cbPageBuffer
  
Параметр входного ввода. Размер параметра **pvPageBuffer** в bytes. Это значение должно быть нескольким размером страницы базы данных, как возвращается в **параметре pcbDbPageSize** функцией **ErrCheckDbHeaders.** 
    
### <a name="rgpageinfo"></a>rgPageInfo[] 
  
Параметр Вход/выход. Массив структур **PAGE \_ INFO,** которые **ErrCheckDbPages** заполняет подробными результатами каждой проверяемой страницы базы данных. Массив должен иметь один элемент для каждой страницы базы данных, переданной в **параметре pvPageBuffer,** а поле **ulPgno** в каждой структуре **PAGE \_ INFO** должно быть задано логическому номеру страницы, соответствующему странице базы данных. Дополнительные сведения см. в разделе "Замечания". 
    
### <a name="cpageinfo"></a>cPageInfo
  
Параметр входного ввода. Количество записей в массиве **rgPageInfo[]** Это значение должно быть равно количеству страниц базы данных, переданным в **параметре pvPageBuffer.** 
    
### <a name="ulflags"></a>ulFlags 
  
Необязательный параметр ввода. Это значение зарезервировано для использования в будущем. Значение, переданного в этом параметре, должно быть 0 (ноль).
    
## <a name="return-value"></a>Возвращаемое значение

Код ошибки из переумерия [ERR.](cchksgfiles-err-enumeration.md) 
  
## <a name="remarks"></a>Заметки

Обратите внимание, что необходимо указать базу данных в массиве баз данных, переданных функции **ErrInit.** Кроме того, **ErrCheckDbHeaders** должны быть вызваны перед **ErrCheckDbPages**.
  
Приложение для вызова должно выделить буфер памяти, достаточно большой для проверки страниц базы данных. Приложение отвечает за заполнение буфера содержимым одной или более таких страниц базы данных. 
  
Приложение для вызова должно вызвать **ErrCheckDbHeaders,** прежде чем **вызывать ErrCheckDbPages.** Эта функция может быть вызвана столько раз, сколько необходимо для покрытия всех страниц во всех файлах баз данных, которые должны быть проверены.
  
В **параметре rgPageInfo каждый** возвращаемый элемент содержит сведения о странице базы данных в **структуре PAGE \_ INFO.** Если функция **ErrCheckDbPages** возвращает ошибку, приложение должно проверить каждую структуру **PAGE \_ INFO,** чтобы определить, на какой странице обнаружена ошибка. Например, сравнение значений **checksumActual** и **checksumExpected** указывает, была ли обнаружена ошибка проверки на этой странице базы данных. 
  
Если **ErrCheckDbPages** обнаруживает ошибки в контенте базы данных, это создаст запись журнала событий Windows ошибки. 
  
Объект **CChkSGFiles** определяет, были ли проверены все базы данных, зарегистрированные с функцией **ErrInit.** В частности, **CChkSGFiles** использует функцию **ErrCheckDbPages,** чтобы определить, было ли проверено одинаковое количество страниц баз данных, указанных **ErrCheckDbHeaders.** Если правильное количество страниц в каждой базе данных не было успешно проверено, функция **ErrTerm** возвращает ошибку. 
  
Если вы используете CHKSGFILES в многоуровневом приложении, вы можете вызвать функцию **ErrCheckDbPages** в многоуровневой части приложения. Обратите внимание, что для каждой проверяемой базы данных **ErrCheckDbPages** обычно называют несколько раз. 
  
## <a name="requirements"></a>Requirements

Exchange 2013 включает только 64-битную версию API CHKSGFILES.
  
Учетная запись, в которой работает приложение, должна иметь разрешения на чтение в базу данных и файлы журналов, которые необходимо проверить.
  

