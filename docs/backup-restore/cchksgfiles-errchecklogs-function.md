---
title: Функция CChkSGFiles.ErrCheckLogs
manager: sethgros
ms.date: 11/16/2014
ms.audience: Developer
ms.topic: overview
ms.prod: office-online-server
ms.localizationpriority: medium
api_name:
- ErrCheckLogs
api_type:
- dllExport
ms.assetid: cec0df4b-4679-4682-bacf-69b4f4aef343
description: 'Последнее изменение: 22 февраля 2013 г.'
ms.openlocfilehash: 64484b32fdc566d6fee8631f80d078aca82b11d1
ms.sourcegitcommit: 54f6cd5a704b36b76d110ee53a6d6c1c3e15f5a9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/24/2021
ms.locfileid: "59516386"
---
# <a name="cchksgfileserrchecklogs-function"></a>Функция CChkSGFiles.ErrCheckLogs

**Применяется к: Exchange Server** 2003 | Exchange Server 2007 | Exchange Server 2010 | Exchange Server 2013 г.
  
Проверяет файлы журналов всех файлов баз данных, указанных в функции **ErrInit.** Проверенные журналы — это те, которые существуют на пути, и у них есть имя файла файла базового журнала с тремя буквами, переданное **ErrInit.**
  
```cs
Vitual ERRErrCheckLogs 
(
        BOOL  * const pfOnlyUnnecessaryLogsCorrup,
    Const ULONGulFlags = NO_FLAGS
);

```

## <a name="parameters"></a>Параметры

### <a name="pfonlyunnecessarylogscorrupt"></a>pfOnlyUnnecessaryLogsCorrupt 
  
Параметр вывода. Если верно, этот параметр указывает на то, что ошибки были найдены в файлах журнала транзакций, но все эти ошибки были найдены в файлах журналов, которые не нужны, чтобы привести базу данных в состояние очистки отключения без потери данных. **Истинное** значение, возвращаемого в этом параметре, допустимо только тогда, когда **ErrCheckLogs** возвращает **errSuccess.** 
    
### <a name="ulflags"></a>ulFlags
  
Необязательный параметр ввода. Это значение зарезервировано для использования в будущем. Значение, пройденного этим параметром, должно быть 0 (ноль).
    
## <a name="return-value"></a>Возвращаемое значение

Код ошибки из переумерия [ERR.](cchksgfiles-err-enumeration.md) 
  
Важно помнить, что эта функция может возвращать **errSuccess** даже при обнаружении ошибок в файлах журнала. Поэтому, когда **ErrCheckLogs** возвращает **errSuccess,** приложение должно также проверить **параметр возврата pfOnlyUnnecessaryLogsCorrupt.** Если **pfOnlyUnnecessaryLogsCorrupts** верно, когда **ErrCheckLogs возвращает errSuccess,** это указывает на то, что обнаружена одна или несколько ошибок, но только в файлах журналов, не необходимых для актуальности базы данных.  
  
## <a name="remarks"></a>Заметки

Функция **ErrCheckDbHeaders** должна быть вызвана, прежде чем можно было бы назвать функцию **ErrCheckLogs.** 
  
Когда Exchange файлы журналов транзакций баз данных проверяются, некоторые из файлов журналов будут необходимы для того, чтобы привести базы данных в группе хранения в состояние очистки отключения без потери данных, в то время как другие файлы журналов могут не потребоваться. Функция **ErrCheckLogs** определяет как самые старые, так и самые новые файлы журналов, необходимые для того, чтобы привести базы данных в нужное время. 
  
Функция **ErrCheckLogs** проверяет все файлы журнала в указанных путях, которые также имеют указанное базовое имя файла с тремя буквами, как передается функции **ErrInit.** 
  
Если в файлах журнала не обнаружено ошибок, **ErrCheckLogs** возвращает **errSuccess.** 
  
Если какой-либо из необходимых файлов журнала признан поврежденным, **ErrCheckLogs** возвращает ошибку. 
  
Если ошибки находятся только в файлах журналов, которые старше ранних, функция возвращает **errSuccess и** задает значение **возвращаемого параметра pfOnlyUnnecessaryLogCorrupt.**  Приложение должно распознать, что в некоторых старых файлах журнала имеются ошибки, и если это так, оно, возможно, оповещает пользователя. В любом случае эти ошибки не должны влиять на общую целостность базы данных или влияют на успешность воспроизведения журналов вперед.
  
Если ошибки найдены в любом файле журнала, созданном после ранней ошибки, которую определяет **ErrCheckLogs,** функция возвращает ошибку. Ошибка будет возвращена, даже если ошибка файла журнала была найдена в файле журнала, который был создан позже, чем необходимо для того, чтобы привести базу данных в даты. Хотя можно было бы привести базы данных в состояние очистки, используя выявленные файлы журналов, транзакции, указанные в более поздних поврежденных файлах журнала, не будут применяться, что приведет к потере данных при восстановлении базы данных. 
  
Объект **CChkSGFiles** определяет, проверялись ли все файлы журнала, зарегистрированные с функцией **ErrInit.** Если не все журналы были успешно проверены, функция **ErrTerm** возвращает ошибку. 
  
Если вы используете CHKSGFILES в многоуровневом приложении, вы можете вызвать функцию **ErrCheckLogs** в многоуровневой части приложения, но вызвать ее можно только один раз для каждого объекта **CCheckSGFiles.** 
  
## <a name="requirements"></a>Requirements

Exchange 2013 включает только 64-битную версию API CHKSGFILES.
  
Учетная запись, в которой работает приложение, должна иметь разрешения на доступ к базе данных и файлы журналов, которые необходимо проверить.
  

